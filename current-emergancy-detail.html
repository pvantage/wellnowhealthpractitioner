<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">
<title>Wellnowhealth</title>

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<!-- /Bootstrap CSS -->

<!-- Font Awesome CSS -->
<link rel="stylesheet" href="css/font-awesome.min.css">
<!-- /Font Awesome CSS -->

<!-- Custom Style CSS -->
<link rel="stylesheet" href="css/slidenav.css">
<!-- /Custom Style CSS -->

<!-- Common Style CSS -->
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/mycss.css">
<!-- /Common Style CSS -->

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<div class="full-height background-layer"> 
    
    <!-----Header Start------->
    <header class="header container-fluid">
        <div class="container"> <a href="pending-emergencies.html" class="header-back-btn"><i  class="fa fa-angle-left"></i> </a>
            <div class="logo"><a href="your-location.html"><img src="images/logo.png"  alt=""></a></div>
        </div>
    </header>
    <!-----Header End-------> 
    
    <!-----Main wrapper Start------->
    <div class="main-wrapper mt-5 p-dtl-main">
        <div class="container">
         <h1 class="entry-title text-center text-white">Location Detail</h1>
		 <p class="displaydistance" style="margin-top:-15px;"></p>
        </div>
     <div class="location-map mb-4"><div id="ourgmap"></div></div>   
        
    </div>
    <!-----Main wrapper End-------> 
    
</div>
<div class="modal fade" id="emergency" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content bg-primary text-white"> 
            
             <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
            
            <div class="modal-body">
                <form id="loginuser" action="" method="post">
					<input type="hidden" name="company_id" value="0">
					<input type="hidden" name="clinic_id" value="0">
					<input type="hidden" name="manager_id" value="0">
					<input type="hidden" name="emergency_id" value="0">
					<input type="hidden" name="add_by" value="manager">
					<div class="notelists"></div>
                    <div class="mb-3">
					   <div>
						<textarea name="note" rows="4" cols="50" class="form-control required"></textarea>
					  </div>
                    </div>
                    <div  class="submitwrap">
                        <div class="pull-left">
                            <button type="submit" class="btn btn-primary">SEND</button>
                        </div>
                        <!--<div class="pull-right"> <a href="#" class="btn btn-dark">REGISTER</a></div>-->
                    </div>
                </form>  
            </div>
        </div>
    </div>
</div>
<script src="js/jquery-3.2.1.min.js" ></script>
<script src="js/popper.min.js" ></script>
<script src="js/bootstrap.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
	<script type="text/javascript" src="js/config.js"></script>
	<script type="text/javascript" src="js/validate.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?sensor=true&libraries=geometry&key=AIzaSyAdRw4y6QbeCa2AVoQcI_j7NMQZPYDrabU" type="text/javascript"></script>
<script>
  function openNav() {
      document.getElementById("mySidenav").style.width = "100%";
  }

  function closeNav() {
      document.getElementById("mySidenav").style.width = "0";
  }
  
</script>
<script type="text/javascript">
var map_icon=localStorage.getItem('Manager_photo_map');
function getdistance(fromlati,fromlongi,fromaddress,tolati,tolongi,toaddress){
	var from = new google.maps.LatLng(fromlati, fromlongi);
	var fromName = fromaddress;
	var dest = new google.maps.LatLng(tolati, tolongi);
	var destName = toaddress;
	//alert(fromName+'==='+destName);
	var service = new google.maps.DistanceMatrixService();
	service.getDistanceMatrix(
		{
			origins: [from, fromName],
			destinations: [destName, dest],
			travelMode: 'DRIVING'
		}, callback);
	
	function callback(response, status) {
		if (status == 'OK') {
			var origins = response.originAddresses;
			var destinations = response.destinationAddresses;
	
			for (var i = 0; i < origins.length; i++) {
				var results = response.rows[i].elements;
				console.log(results);
				for (var j = 0; j < results.length; j++) {
					var element = results[j];
					var distance = element.distance.text;
					var duration = element.duration.text;
					jQuery('.displaydistance').html('Estimated Distance : '+distance+'<br>Estimated Time: '+duration);
					
					var from = origins[i];
					var to = destinations[j];
				}
			}
		}
	}
}
function checkseenmsg(){
	var seenmsgs=localStorage.getItem('seenmsgs');
	var seenmsgs_ids='';
	if(typeof seenmsgs!='undefined' && seenmsgs!='' && seenmsgs!=null){
		seenmsgs_ids=seenmsgs;
	}
	var emergency_id=gup('id');
	if(emergency_id!='' && emergency_id!='0'){
		var url=siteurl+'/api/emergencies/checkseenmsgs';
		jQuery.ajax({  
		 type: 'POST',  
		 url: url,           
		 dataType: 'json',  
		 data: {seenmsgs_ids:seenmsgs_ids,emergency_id:emergency_id,seeby:'manager'}, 
		 beforeSend: function() {
			
		 },		
		 complete: function() {
		 }, 
		 crossDomain: true,  
		 success: function(res) { 
			if(res['seenids']){
				jQuery(res['seenids']).each(function(index){
					jQuery('.seen_'+res['seenids'][index]['em_msg_id']).removeClass('notseenmsg');
					jQuery('.seen_'+res['seenids'][index]['em_msg_id']).addClass('seenmsg');
				});
			}
		 },  
		 error: function(response, d, a){
			
			jQuery('body .showmessage').remove();
			var html='<div class="showmessage">Server Error.</div>';
			jQuery('body').append(html);
			setTimeout(function(){jQuery('.showmessage').slideUp();},1000);
			return false; 
		 }
				
	   });
	 }
}
function checkcurrentpostion(company_id){
	var url=siteurl+'/api/emergencies/companydetail';
	jQuery.ajax({  
		type: 'POST',  
		url: url,           
		dataType: 'json',  
		crossDomain: true,
		data: {company_id:company_id}, 
		beforeSend: function() {
		
		},		
		complete: function() {
		}, 
		crossDomain: true,  
		success: function(res) { 
			if(res['current_lati']){
				localStorage.setItem('Driver_Lat',res['current_lati']);
				localStorage.setItem('Driver_Long',res['current_longi']);
			}
		},  
		error: function(response, d, a){
		
		
		return false; 
		}
	});
	setTimeout(function(){checkcurrentpostion(company_id);},15000);
}
var map, marker, old_lati, old_longi;
	var speed = 50; // km/h
	var startPos = [];
var delay = 100;
var mapicon='images/refspot.png';
var Staff_Lat= localStorage.getItem('Manager_clinic_lati');
var Staff_Long= localStorage.getItem('Manager_clinic_longi');
var our_address=localStorage.getItem('Manager_clinicaddress');
function mylocation(map,old_lati,old_longi,marker,mapicon,geocoder,infowindow){
	
	var new_lati=localStorage.getItem('Driver_Lat');
	var new_longi=localStorage.getItem('Driver_Long');
	updateMarker(geocoder,infowindow,marker, new_lati, new_longi,mapicon);
	if(old_lati!=new_lati && old_longi!=new_longi){
		old_lati=new_lati;
		old_longi=new_longi;
		google.maps.event.addListenerOnce(map, 'idle', function()
		{
			animateMarker(marker, [
				[new_lati, new_longi]
			], speed);
		});
	}
	/*else{
		google.maps.event.addListenerOnce(map, 'idle', function()
		{
			animateMarker(marker, [
				[new_lati, new_longi]
			], speed);
		});
	}*/
	
   setTimeout(function(){mylocation(map,old_lati,old_longi,marker,mapicon,geocoder,infowindow)},3000);
}
function updateMarker(geocoder,infowindow,marker, latitude, longitude,mapicon) {
  var latlng3 = {lat: parseFloat(latitude), lng: parseFloat(longitude)};
        geocoder.geocode({'location': latlng3}, function(results, status) {
          if (status === 'OK') {
            if (results[0]) {
              infowindow.setContent(results[0].formatted_address);
			  getdistance(latitude,longitude,results[0].formatted_address,Staff_Lat,Staff_Long,our_address);
            } 
          }
        });
 
  
}
function animateMarker(marker, coords, km_h)
{
    var target = 0;
    var km_h = km_h || 50;
    coords.push([startPos[0], startPos[1]]);
    function goToPoint()
    {
        var lat = marker.position.lat();
        var lng = marker.position.lng();
        var step = (km_h * 1000 * delay) / 3600000; // in meters
        
        var dest = new google.maps.LatLng(
        coords[target][0], coords[target][1]);
        
        var distance =
        google.maps.geometry.spherical.computeDistanceBetween(
        dest, marker.position); // in meters
        
        var numStep = distance / step;
        var i = 0;
        var deltaLat = (coords[target][0] - lat) / numStep;
        var deltaLng = (coords[target][1] - lng) / numStep;
        
        function moveMarker()
        {
            lat += deltaLat;
            lng += deltaLng;
            i += step;
            
            if (i < distance)
            {
                marker.setPosition(new google.maps.LatLng(lat, lng));
                setTimeout(moveMarker, delay);
            }
            else
            {   marker.setPosition(dest);
                target++;
                if (target == coords.length){ target = 0; }
                
                //setTimeout(goToPoint, delay);
            }
        }
        moveMarker();
    }
    goToPoint();
}
function completethis(){
	var id=gup('id');
	var uid= localStorage.getItem('Manager_ID');
	var url=siteurl+'/api/emergencies/updateemergency';
	jQuery.ajax({  
		type: 'POST',  
		url: url,           
		dataType: 'json',  
		crossDomain: true,
		data: {id:id,status:'completed',uid:uid}, 
		beforeSend: function() {
		
		},		
		complete: function() {
		}, 
		crossDomain: true,  
		success: function(res) { 
		if(res['msg'])
		{
			jQuery('body .showmessage').remove();
			var html='<div class="showmessage">'+res['msg']+'</div>';
			jQuery('body').append(html);
			setTimeout(function(){jQuery('.showmessage').slideUp();},3000);
			
		}else if(res['error']){				
			jQuery('body .showmessage').remove();
			var html='<div class="showmessage">'+res['error']+'</div>';
			jQuery('body').append(html);
			setTimeout(function(){jQuery('.showmessage').slideUp();
			},3000);
		}
		jQuery('.complete-btn').remove();
		},  
		error: function(response, d, a){
		
		jQuery('body .showmessage').remove();
		var html='<div class="showmessage">Server Error.</div>';
		jQuery('body').append(html);
		setTimeout(function(){jQuery('.showmessage').slideUp();},1000);
		return false; 
		}
	});
}
function opennotes(showmsg){
	var emergency_id=gup('id');
	var url=siteurl+'/api/emergencies/getmsgs';
	var uid= localStorage.getItem('Manager_ID');
	 jQuery.ajax({  
	 type: 'POST',  
	 url: url,           
	 dataType: 'json',  
	 data: {emergency_id:emergency_id,seeby:'manager'}, 
	 beforeSend: function() {
	 	if(showmsg=='yes'){
			jQuery('#emergency').modal();
		}
	 },		
	 complete: function() {
	 }, 
	 crossDomain: true,  
	 success: function(res) { 
		if(res['notes'])
		{
			jQuery('.notelists').html('');
			jQuery(res['notes']).each(function(index){
				var clsas=' clinicnote';
				var msgg=res['notes'][index]['note']+' <span class="seen_'+res['notes'][index]['id']+' notseenmsg"></span>';
				if(jQuery.trim(res['notes'][index]['company'])!=''){
					msgg=res['notes'][index]['note']+' :'+res['notes'][index]['company'];
					clsas='managernote';
				}
				else{
					if(uid==res['notes'][index]['manager_id']){
						msgg=res['notes'][index]['note']+' <span class="seen_'+res['notes'][index]['id']+' notseenmsg"></span>';
						
					}
					else{
						msgg=res['notes'][index]['note']+' :'+res['notes'][index]['manager'];
						clsas='managernote';
					}
				}
				jQuery('.notelists').append('<div class="note-content"><span class="'+clsas+'">'+msgg+'</span></div>');
			});
			
		
		}
		setInterval(checkseenmsg,6000);
		return false; 
	 },  
	 error: function(response, d, a){
		
		jQuery('body .showmessage').remove();
		var html='<div class="showmessage">Server Error.</div>';
		jQuery('body').append(html);
		setTimeout(function(){jQuery('.showmessage').slideUp();},1000);
		return false; 
	 }
			
   });
   if(typeof inter!='undefined'){
		clearInterval(inter);
	}
	var inter=setInterval(notes,5000);
}
function notes(){
	var emergency_id=gup('id');
	var url=siteurl+'/api/emergencies/getsinglemsgs';
	var uid= localStorage.getItem('Manager_ID');
	 jQuery.ajax({  
	 type: 'POST',  
	 url: url,           
	 dataType: 'json',  
	 data: {emergency_id:emergency_id,seeby:'manager'}, 
	 beforeSend: function() {
		
	 },		
	 complete: function() {
	 }, 
	 crossDomain: true,  
	 success: function(res) { 
		if(res['notes'] && jQuery.trim(res['notes'])!='')
		{
			jQuery(res['notes']).each(function(index){
				var clsas='clinicnote';
				var msgg=res['notes'][index]['note'];
				if(jQuery.trim(res['notes'][index]['company'])!=''){
					msgg=res['notes'][index]['note']+' :'+res['notes'][index]['company'];
					clsas='managernote';
				}
				else{
					if(uid==res['notes'][index]['manager_id']){
						msgg=res['notes'][index]['note'];
					}
					else{
						msgg=res['notes'][index]['note']+' :'+res['notes'][index]['manager'];
						clsas='managernote';
					}
				}
				jQuery('.notelists').append('<div class="note-content"><span class="'+clsas+'">'+msgg+'</span></div>');
			});
			jQuery('#emergency').modal();
		
		}
		return false; 
	 },  
	 error: function(response, d, a){
		
		jQuery('body .showmessage').remove();
		var html='<div class="showmessage">Server Error.</div>';
		jQuery('body').append(html);
		setTimeout(function(){jQuery('.showmessage').slideUp();},1000);
		return false; 
	 }
			
   });
}
function getemdetail(){
	var url=siteurl+'/api/emergencies/ergencydetail';
	var id=gup('id');
	var uid= localStorage.getItem('Manager_ID');
	jQuery.ajax({  
		type: 'POST',  
		url: url,           
		dataType: 'json',  
		crossDomain: true,
		data: {id:id,from:'doctor',doctor_id:uid}, 
		beforeSend: function() {
		
		},		
		complete: function() {
		}, 
		crossDomain: true,  
		success: function(res) { 
		if(res['data'])
		{
			var html='';
			jQuery(res['data']).each(function(index){
				jQuery('input[name="company_id"]').val(res['data'][index]['company_id']);
			  	jQuery('input[name="clinic_id"]').val(res['data'][index]['clinic_id']);
				if(res['data'][index]['status']=='completed')
				{
					window.location='emergancy-detail.html?id='+id;
				}
			});
			
		}else if(res['nodata']){				
			//jQuery('.activity-map-wrap').append(res['nodata']);
		}
		
		},  
		error: function(response, d, a){
			jQuery('body .showmessage').remove();
			var html='<div class="showmessage">Server Error.</div>';
			jQuery('body').append(html);
			setTimeout(function(){jQuery('.showmessage').slideUp();},1000);
			return false; 
		}
	});
}
jQuery(document).ready(function(){
	jQuery( document ).on( "mobileinit", function() {
		jQuery.mobile.allowCrossDomainPages = true;
	});
	var contentType ="application/x-www-form-urlencoded; charset=utf-8";
    if(window.XDomainRequest){contentType = "text/plain";}
	jQuery.support.cors = true;
	var id=gup('id');
	var uid= localStorage.getItem('Manager_ID');
	jQuery('input[name="emergency_id"]').val(id);
	jQuery('input[name="manager_id"]').val(uid);
	
	var setgooglepath=function(joblati,joblongi, jobaddress,our_address, mapid) {
        var directionsDisplay = new google.maps.DirectionsRenderer({suppressMarkers:true});
        var directionsService = new google.maps.DirectionsService;
		var latit=parseFloat(Staff_Lat);
		var longit=parseFloat(Staff_Long);
        var map = new google.maps.Map(document.getElementById(mapid), {
          zoom: 12,
          center: {lat: latit, lng: longit}
        });
        directionsDisplay.setMap(map);
		getdistance(joblati,joblongi,jobaddress,Staff_Lat,Staff_Long,our_address);
		
		
		var geocoder = new google.maps.Geocoder;
		var infowindow = new google.maps.InfoWindow;
		var latlng = {lat: parseFloat(latit), lng: parseFloat(longit)};
		var ourphoto='images/home.png';
		if(jQuery.trim(map_icon)!=''){ourphoto=map_icon;}
		var marker = new google.maps.Marker({
			position: latlng,
			map: map,
			animation: google.maps.Animation.DROP,
			icon: ourphoto
		});
	  marker.setPosition( latlng );
	   google.maps.event.addListener(marker, "click", function (e) {
			var infoWindow = new google.maps.InfoWindow();
			infoWindow.setContent(our_address);
			infoWindow.open(map, marker);
		});
		var imgommap='images/mapicon.png';
		var latlng2={lat: parseFloat(joblati), lng: parseFloat(joblongi)};
		var marker2 = new google.maps.Marker({
			position: latlng2,
			map: map,
			animation: google.maps.Animation.DROP,
			icon: imgommap
		});
	  marker2.setPosition( latlng2 );
	  google.maps.event.addListener(marker2, "click", function (e) {
			var infoWindow = new google.maps.InfoWindow();
			infoWindow.setContent(jobaddress);
			infoWindow.open(map, marker2);
		});
		
		
	  var latlng = {lat: parseFloat(joblati), lng: parseFloat(joblongi)};
        geocoder.geocode({'location': latlng}, function(results, status) {
          if (status === 'OK') {
            if (results[0]) {
              var marker = new google.maps.Marker({
                position: latlng,
                map: map,
				icon: {
						url: mapicon
					}
              });
			 
              infowindow.setContent(results[0].formatted_address);
			  mylocation(map,joblati,joblongi,marker,mapicon,geocoder,infowindow);
            } else {
              window.alert('No results found');
            }
          } else {
            window.alert('Geocoder failed due to: ' + status);
          }
        });
		
		directionsService.route({
          origin: our_address,  
          destination: jobaddress,  
          travelMode: google.maps.TravelMode.DRIVING
        }, function(response, status) {
          if (status == 'OK') {
            directionsDisplay.setDirections(response);
          } else {
            //window.alert('Directions request failed due to ' + status);
          }
        });
        
      }
	
	var url=siteurl+'/api/emergencies/ergencydetail';
	jQuery.ajax({  
		type: 'POST',  
		url: url,           
		dataType: 'json',  
		crossDomain: true,
		data: {id:id,from:'doctor',doctor_id:uid}, 
		beforeSend: function() {
		
		},		
		complete: function() {
		}, 
		crossDomain: true,  
		success: function(res) { 
		if(res['data'])
		{
			var html='';
			jQuery(res['data']).each(function(index){
				var btnhtm='<div class="btm-btn-sctn">';
				btnhtm+='<div class="text-center mb-3"><a href="tel:'+res['data'][index]['emergency_phone']+'" class="btn btn-primary">CONTACT EMERGENCY</a></div>';
				if(res['data'][index]['status']=='pending'){
				btnhtm+='<div class="text-center mb-3"><a href="javascript:;" onclick="return completethis();" class="btn btn-primary">COMPLETE</a></div>';
				}
				btnhtm+='<div class="text-center mb-3"><a href="javascript:;" onclick="return opennotes(\'yes\');" class="btn btn-primary">MESSAGES</a></div>';
				btnhtm+='</div>';
				jQuery('.main-wrapper').append(btnhtm);
				setTimeout(function(){
				var lati=res['data'][index]['address_lati'], 
				longi=res['data'][index]['address_longi'],
				address=res['data'][index]['companyaddress'], 
				mapid='ourgmap';
				localStorage.setItem('Driver_Lat',res['data'][index]['current_lati']);
				localStorage.setItem('Driver_Long',res['data'][index]['current_longi']);
				setgooglepath(lati,longi, address,our_address, mapid);
				setTimeout(function(){checkcurrentpostion(res['data'][index]['company_id']);},2000);
				opennotes('no');
				},1000);
			});
			
		}else if(res['nodata']){				
			//jQuery('.activity-map-wrap').append(res['nodata']);
		}
		
		},  
		error: function(response, d, a){
		
		jQuery('body .showmessage').remove();
		var html='<div class="showmessage">Server Error.</div>';
		jQuery('body').append(html);
		setTimeout(function(){jQuery('.showmessage').slideUp();},1000);
		return false; 
		}
	});
	var url=siteurl+'/api/emergencies/updateemergencymanager';
	jQuery.ajax({  
		type: 'POST',  
		url: url,           
		crossDomain: true,
		data: {id:id,doctor_id:uid}, 
		beforeSend: function() {
		
		},		
		complete: function() {
		}, 
		crossDomain: true,  
		success: function(res) { 
		
		
		},  
		error: function(response, d, a){
		
		jQuery('body .showmessage').remove();
		var html='<div class="showmessage">Server Error.</div>';
		jQuery('body').append(html);
		setTimeout(function(){jQuery('.showmessage').slideUp();},1000);
		return false; 
		}
	});
	jQuery('#loginuser').submit( function(){	
		var error=false;
		jQuery('#loginuser input.required').each(function(){
			var v=jQuery(this).val();
			if(jQuery.trim(v)==''){
				jQuery(this).addClass('error');
				error=true;
			}
			else{
				jQuery(this).removeClass('error');
			}
		});
		jQuery('#loginuser textarea.required').each(function(){
			var v=jQuery(this).val();
			if(jQuery.trim(v)==''){
				jQuery(this).addClass('error');
				error=true;
			}
			else{
				jQuery(this).removeClass('error');
			}
		});
		var url=siteurl+'/api/emergencies/addemergencymsg';
		if(error)
		{
			return false;
		}
		else
		{
			var msg=jQuery('#loginuser textarea[name="note"]').val();
			 jQuery.ajax({  
			 type: 'POST',  
			 url: url,           
			 dataType: 'json',  
			 data: jQuery('#loginuser').serialize(), 
			 beforeSend: function() {
			 	
			 },		
			 complete: function() {
			 }, 
			 crossDomain: true,  
			 success: function(res) { 
				if(res['msg'])
				{
					
					jQuery('.notelists').append('<div class="note-content"><span class="clinicnote">'+msg+'<span class="seen_'+res['emergency_id']+' notseenmsg"></span></span></div>');
					jQuery('body .showmessage').remove();
					var html='<div class="showmessage">'+res['msg']+'</div>';
					jQuery('body').append(html);
					setTimeout(function(){jQuery('.showmessage').slideUp();},3000);
					jQuery('#loginuser textarea[name="note"]').val('');
					
				
				}else if(res['errors']){				
					jQuery('body .showmessage').remove();
					var html='<div class="showmessage">'+res['error']+'</div>';
					jQuery('body').append(html);
					setTimeout(function(){jQuery('.showmessage').slideUp();},3000);
				}
				else
				{
					alert('Server error');
				}
				return false; 
			 },  
			 error: function(response, d, a){
				
				jQuery('body .showmessage').remove();
				var html='<div class="showmessage">Server Error.</div>';
				jQuery('body').append(html);
				setTimeout(function(){jQuery('.showmessage').slideUp();},1000);
				return false; 
			 }
			        
		   });
		 }	
		 return false;   
	});
	setInterval(getemdetail,5000);
});
var uid=localStorage.getItem('Manager_ID');
if(typeof uid=='undefined' || uid=='' || uid=='undefined' || uid==null){
	setTimeout(function(){
		window.location='login.html';
	},1000);
}
</script>
</body>
</html>
